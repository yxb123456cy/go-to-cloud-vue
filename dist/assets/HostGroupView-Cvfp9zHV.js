import{d as j,r as p,a as b,s as L,c as x,o as S,b as l,f as n,w as a,B as R,M as r,g as _,j as y,t as f,E as q}from"./index-DpkOdSpx.js";/* empty css              */import{I as A}from"./index-NTQZ5pKC.js";import{F as J,a as K}from"./index-DbrLpDkb.js";import{T as Q}from"./index-DZoqJv9h.js";import{T as W,I as X}from"./index-Opp2L5Up.js";import{T as Y}from"./index-DT4y2raZ.js";import{S as Z}from"./index-CqC8rdLl.js";import{M as I}from"./index-D8cCLrR9.js";import{I as ee}from"./index-BnJnKAkJ.js";import{I as te}from"./index-BgAednXr.js";const ae={class:"p-6 bg-gray-50 min-h-screen"},oe={class:"flex items-center justify-between mb-6"},ne={class:"bg-white rounded-lg shadow-sm border border-gray-200"},se={class:"font-medium text-gray-900"},le={key:0,class:"text-sm text-gray-500"},we=j({__name:"HostGroupView",setup(re){const i=p(!1),d=p(!1),m=p(null),w=p([]),g=p(),s=b({name:"",description:""}),c=b({current:1,pageSize:10,total:0,showSizeChanger:!0,showTotal:!0}),k=[{title:"主机组名称",dataIndex:"name",slotName:"name",width:300},{title:"主机数量",dataIndex:"hostCount",slotName:"hostCount",width:120},{title:"创建时间",dataIndex:"created_at",slotName:"created_at",width:180},{title:"操作",slotName:"actions",width:150,align:"center"}],V={name:[{required:!0,message:"请输入主机组名称"},{minLength:2,message:"主机组名称至少2个字符"}]},D=o=>new Date(o).toLocaleString("zh-CN"),h=()=>{s.name="",s.description="",m.value=null,d.value=!1,g.value?.resetFields()},N=o=>{c.current=o,u()},T=o=>{c.pageSize=o,c.current=1,u()},z=o=>{m.value=o,s.name=o.name,s.description=o.description||"",d.value=!0},M=o=>{I.confirm({title:"确认删除",content:`确定要删除主机组 "${o.name}" 吗？此操作不可恢复。`,onOk:async()=>{try{r.success("删除成功"),u()}catch{r.error("删除失败")}}})},O=async()=>{try{if(!await g.value?.validate())return;i.value=!0,m.value?r.success("更新成功"):r.success("创建成功"),h(),u()}catch{r.error(m.value?"更新失败":"创建失败")}finally{i.value=!1}},u=async()=>{try{i.value=!0,w.value=[{id:1,name:"生产环境",description:"生产环境服务器组",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:2,name:"测试环境",description:"测试环境服务器组",created_at:new Date(Date.now()-864e5).toISOString(),updated_at:new Date(Date.now()-864e5).toISOString()}],c.total=2}catch{r.error("加载主机组列表失败")}finally{i.value=!1}};return L(()=>{u()}),(o,e)=>{const v=R,B=Y,F=Z,H=W,P=A,C=K,G=Q,$=J,E=I;return S(),x("div",ae,[l("div",oe,[e[5]||(e[5]=l("div",null,[l("h1",{class:"text-2xl font-bold text-gray-900 mb-2"},"主机组管理"),l("p",{class:"text-gray-600"},"管理部署目标主机的分组")],-1)),n(v,{type:"primary",onClick:e[0]||(e[0]=t=>d.value=!0)},{icon:a(()=>[n(y(X))]),default:a(()=>[e[4]||(e[4]=_(" 新建主机组 ",-1))]),_:1,__:[4]})]),l("div",ne,[n(H,{columns:k,data:w.value,loading:i.value,pagination:c,onPageChange:N,onPageSizeChange:T},{name:a(({record:t})=>[l("div",null,[l("p",se,f(t.name),1),t.description?(S(),x("p",le,f(t.description),1)):q("",!0)])]),hostCount:a(({record:t})=>[n(B,{color:"blue"},{default:a(()=>[_(f(t.hostCount||0)+" 台主机",1)]),_:2},1024)]),created_at:a(({record:t})=>[_(f(D(t.created_at)),1)]),actions:a(({record:t})=>[n(F,null,{default:a(()=>[n(v,{type:"text",size:"small",onClick:U=>z(t)},{icon:a(()=>[n(y(ee))]),default:a(()=>[e[6]||(e[6]=_(" 编辑 ",-1))]),_:2,__:[6]},1032,["onClick"]),n(v,{type:"text",size:"small",status:"danger",onClick:U=>M(t)},{icon:a(()=>[n(y(te))]),default:a(()=>[e[7]||(e[7]=_(" 删除 ",-1))]),_:2,__:[7]},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","loading","pagination"])]),n(E,{visible:d.value,"onUpdate:visible":e[3]||(e[3]=t=>d.value=t),title:m.value?"编辑主机组":"新建主机组",onOk:O,onCancel:h},{default:a(()=>[n($,{ref_key:"formRef",ref:g,model:s,rules:V,layout:"vertical"},{default:a(()=>[n(C,{field:"name",label:"主机组名称"},{default:a(()=>[n(P,{modelValue:s.name,"onUpdate:modelValue":e[1]||(e[1]=t=>s.name=t),placeholder:"请输入主机组名称"},null,8,["modelValue"])]),_:1}),n(C,{field:"description",label:"描述"},{default:a(()=>[n(G,{modelValue:s.description,"onUpdate:modelValue":e[2]||(e[2]=t=>s.description=t),placeholder:"请输入主机组描述（可选）",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])])}}});export{we as default};
