import{d as j,r as p,a as C,x as L,c as b,o as S,b as r,f as n,w as a,B as R,M as l,g as f,j as y,v as _,E as q}from"./index-XeR4dm_A.js";/* empty css              */import{I as A}from"./index-_Le4l-FT.js";import{F as J,a as K}from"./index-DblMJEe-.js";import{T as Q}from"./index-BCkAYXOZ.js";import"./index-CG2D6ptY.js";import"./index-DEcwfKP5.js";import{T as W}from"./index-k17B4Fwt.js";import{T as X,I as Y}from"./index-eIo3eb-K.js";import{S as Z}from"./index-Bi8GYVuf.js";import{M as I}from"./index-DUMfmY3d.js";import{I as ee}from"./index-Bqg0be0K.js";import{I as te}from"./index-MIkPKJzQ.js";const oe={class:"p-6 bg-gray-50 min-h-screen"},ae={class:"flex items-center justify-between mb-6"},ne={class:"bg-white rounded-lg shadow-sm border border-gray-200"},se={class:"font-medium text-gray-900"},re={key:0,class:"text-sm text-gray-500"},xe=j({__name:"HostGroupView",setup(le){const i=p(!1),d=p(!1),u=p(null),w=p([]),g=p(),s=C({name:"",description:""}),m=C({current:1,pageSize:10,total:0,showSizeChanger:!0,showTotal:!0}),k=[{title:"主机组名称",dataIndex:"name",slotName:"name",width:300},{title:"主机数量",dataIndex:"hostCount",slotName:"hostCount",width:120},{title:"创建时间",dataIndex:"created_at",slotName:"created_at",width:180},{title:"操作",slotName:"actions",width:150,align:"center"}],V={name:[{required:!0,message:"请输入主机组名称"},{minLength:2,message:"主机组名称至少2个字符"}]};function D(t){return new Date(t).toLocaleString("zh-CN")}function h(){s.name="",s.description="",u.value=null,d.value=!1,g.value?.resetFields()}function N(t){m.current=t,c()}function T(t){m.pageSize=t,m.current=1,c()}function z(t){u.value=t,s.name=t.name,s.description=t.description||"",d.value=!0}function M(t){I.confirm({title:"确认删除",content:`确定要删除主机组 "${t.name}" 吗？此操作不可恢复。`,onOk:async()=>{try{l.success("删除成功"),c()}catch(e){console.error(e),l.error("删除失败")}}})}async function O(){try{if(!await g.value?.validate())return;i.value=!0,u.value?l.success("更新成功"):l.success("创建成功"),h(),c()}catch(t){console.error(t),l.error(u.value?"更新失败":"创建失败")}finally{i.value=!1}}async function c(){try{i.value=!0,w.value=[{id:1,name:"生产环境",description:"生产环境服务器组",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:2,name:"测试环境",description:"测试环境服务器组",created_at:new Date(Date.now()-864e5).toISOString(),updated_at:new Date(Date.now()-864e5).toISOString()}],m.total=2}catch(t){console.error(t),l.error("加载主机组列表失败")}finally{i.value=!1}}return L(()=>{c()}),(t,e)=>{const v=R,B=W,F=Z,H=X,P=A,x=K,G=Q,$=J,E=I;return S(),b("div",oe,[r("div",ae,[e[5]||(e[5]=r("div",null,[r("h1",{class:"text-2xl font-bold text-gray-900 mb-2"}," 主机组管理 "),r("p",{class:"text-gray-600"}," 管理部署目标主机的分组 ")],-1)),n(v,{type:"primary",onClick:e[0]||(e[0]=o=>d.value=!0)},{icon:a(()=>[n(y(Y))]),default:a(()=>[e[4]||(e[4]=f(" 新建主机组 ",-1))]),_:1,__:[4]})]),r("div",ne,[n(H,{columns:k,data:w.value,loading:i.value,pagination:m,onPageChange:N,onPageSizeChange:T},{name:a(({record:o})=>[r("div",null,[r("p",se,_(o.name),1),o.description?(S(),b("p",re,_(o.description),1)):q("",!0)])]),hostCount:a(({record:o})=>[n(B,{color:"blue"},{default:a(()=>[f(_(o.hostCount||0)+" 台主机 ",1)]),_:2},1024)]),created_at:a(({record:o})=>[f(_(D(o.created_at)),1)]),actions:a(({record:o})=>[n(F,null,{default:a(()=>[n(v,{type:"text",size:"small",onClick:U=>z(o)},{icon:a(()=>[n(y(ee))]),default:a(()=>[e[6]||(e[6]=f(" 编辑 ",-1))]),_:2,__:[6]},1032,["onClick"]),n(v,{type:"text",size:"small",status:"danger",onClick:U=>M(o)},{icon:a(()=>[n(y(te))]),default:a(()=>[e[7]||(e[7]=f(" 删除 ",-1))]),_:2,__:[7]},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","loading","pagination"])]),n(E,{visible:d.value,"onUpdate:visible":e[3]||(e[3]=o=>d.value=o),title:u.value?"编辑主机组":"新建主机组",onOk:O,onCancel:h},{default:a(()=>[n($,{ref_key:"formRef",ref:g,model:s,rules:V,layout:"vertical"},{default:a(()=>[n(x,{field:"name",label:"主机组名称"},{default:a(()=>[n(P,{modelValue:s.name,"onUpdate:modelValue":e[1]||(e[1]=o=>s.name=o),placeholder:"请输入主机组名称"},null,8,["modelValue"])]),_:1}),n(x,{field:"description",label:"描述"},{default:a(()=>[n(G,{modelValue:s.description,"onUpdate:modelValue":e[2]||(e[2]=o=>s.description=o),placeholder:"请输入主机组描述（可选）",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])])}}});export{xe as default};
